<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

<h:head>
</h:head>
<h:body>

	<h:panelGroup styleClass="container col-sm-12"
		layout="block">

		<h:form>

			<p:messages showDetail="true" autoUpdate="true" closable="true" />

			<p:outputPanel>

				<p:outputPanel styleClass="ui-grid-row">
					<!-- 				<p:fieldset legend="Filtros"> -->


					<p:panelGrid layout="grid" columns="2"
						columnClasses="ui-grid-col-3,ui-grid-col-9">

						<p:outputLabel for="follow_unit_filter_institution"
							value="Institucion" />
						<h:selectOneMenu id="follow_unit_filter_institution"
							value="#{unitBB.institution}"
							converter="#{dataInstitutionConverter}">
							<f:selectItems itemLabel="#{institution.name}"
								itemValue="#{institution}" value="#{applicationBB.institutions}"
								var="institution" />
						</h:selectOneMenu>

						<p:outputLabel for="follow_unit_filter_institution_code"
							value="Códgo de la Institucion" />
						<p:inputText id="follow_unit_filter_institution_code"
							value="#{unitBB.institutionCode}" />


						<p:outputLabel for="follow_unit_filter_code"
							value="Códgo de la Institucion" />
						<p:inputText id="follow_unit_filter_code" value="#{unitBB.code}" />


						<p:outputLabel for="follow_unit_filter_product_type"
							value="Institucion" />
						<h:selectOneMenu id="follow_unit_filter_product_type"
							value="#{unitBB.productType}"
							converter="#{dataProductTypeConverter}">
							<f:selectItems itemValue="#{product}"
								itemLabel="#{product.display}" value="#{applicationBB.products}"
								var="product" />
						</h:selectOneMenu>

						<p:outputLabel for="follow_unit_filter_blood_type"
							value="Institucion" />
						<h:selectOneMenu id="follow_unit_filter_blood_type"
							value="#{unitBB.bloodType}" converter="#{dataBloodTypeConverter}">
							<f:selectItems itemValue="#{bloodType}"
								itemLabel="#{bloodType.displayName}"
								value="#{applicationBB.bloodTypes}" var="bloodType" />
						</h:selectOneMenu>

					</p:panelGrid>

					<p:outputPanel>
						<p:commandButton value="#{messages.label_search}"
							action="#{unitBB.search()}" update="@form" />
						<p:commandLink value="#{messages.label_clear}"
							action="#{unitBB.searchClear()}" update="@form" />
					</p:outputPanel>

					<!-- 				</p:fieldset> -->
				</p:outputPanel>

				<p:outputPanel styleClass="ui-grid-row"
					rendered="#{unitBB.renderResult}">
					<!-- 				<p:fieldset legend="Resultado"> -->

					<table id="lab_results_table"
						class="col-md-12 table-bordered table-striped table-condensed cf">
						<thead class="cf">
							<tr>
								<th><h:outputText value="Código" /></th>
								<th><h:outputText value="Institución" /></th>
								<th><h:outputText value="Codigo Institución" /></th>
								<th><h:outputText value="Producto" /></th>
								<th><h:outputText value="Tipo" /></th>
								<th><h:outputText value="Vencimiento" /></th>
								<th><h:outputText value="Estado" /></th>
							</tr>
						</thead>
						<tbody>
							<c:forEach items="#{unitBB.units}" var="unit" varStatus="counter">
								<tr>
									<td data-title="Código"><h:outputText value="#{unit.code}" />
									</td>
									<td data-title="Institución"><h:outputText
											value="#{unit.institution}" /></td>
									<td data-title="Código Institución"><h:outputText
											value="#{unit.institutionCode}" /></td>
									<td data-title="Producto"><h:outputText
											value="#{unit.productType.display}" /></td>
									<td data-title="Tipo"><h:outputText
											value="#{unit.bloodType.displayName}" /></td>
									<td data-title="Vencimiento"><h:outputText
											value="#{unit.dueDate}">
											<!-- 										<f:convertDateTime pattern="dd/MM/yyyy" /> -->
										</h:outputText></td>
									<td data-title="Estado"><h:outputText
											value="#{unit.active}" /></td>
								</tr>
							</c:forEach>

						</tbody>
					</table>

					<!-- 				</p:fieldset> -->
				</p:outputPanel>

			</p:outputPanel>
		</h:form>
	</h:panelGroup>
</h:body>
</html>
