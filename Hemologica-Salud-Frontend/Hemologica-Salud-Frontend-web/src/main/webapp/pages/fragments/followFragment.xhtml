<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

<h:head>
</h:head>
<h:body>
	
		<h:form>
			<p:messages showDetail="true" autoUpdate="true" closable="true" />
			
			<div class="container">
				<div class="row">
					<div class="col-md-6 col-md-offset-3">
					<fieldset>
						<legend>
							<h:outputText value="#{messages.label_follow}"/>
						</legend>	
						
						<div class="form-horizontal" >
						
							<div class="form-group">
								<label class="col-md-5 control-label" for="donation_state"><h:outputText
										value="#{messages.label_insitution}" /></label>
								<div class="col-md-9 col-lg-5">
									<h:selectOneMenu styleClass="form-control"
										value="#{unitBB.institution}" style="height: 34px;"
										converter="#{dataInstitutionConverter}">
<!-- 										<p:ajax  update="@form"/> -->
										<f:selectItems value="#{applicationBB.institutions}" var="institution"
											itemValue="#{institution}" itemLabel="#{institution.name}" />
									</h:selectOneMenu>
								</div>
							</div>
							
							<div class="form-group">
								<label class="col-md-5 control-label" for="name"><h:outputText
										value="#{messages.label_unit_code}" /></label>
								<div class="col-md-9 col-lg-5">
									<h:inputText class="label-form-user form-control"
										value="#{unitBB.code}" />
								</div>
								
								<p:commandButton icon="ui-icon-search"
									styleClass="form-control search-btn col-xs-2 col-sm-3 col-md-3 col-lg-1"
								 action="#{unitBB.search()}" process="@form" update="@form" />
							</div>
						</div>
					</fieldset>	
					
					<div id="seguimiento">
						
						<div class="row">
							<div class="col-md-8 col-md-offset-3">
								
<!-- 								if transfusion != null -->
								<fieldset>
									<legend>
										<h:outputText value="#{messages.label_transfusion}"/>
									</legend>	
									<div class="form-horizontal">
										<div class="row">
											<div class="form-group">
										
												<label class="col-md-5 control-label" for="name"><h:outputText
														value="#{messages.donation_date}" />:</label>
												
												<label class="col-md-5 control-label" style="text-align: left;">
													<h:outputText value="#{unitBB.unit.transfusion.date}" />
												</label>
												
											</div>
											<div class="form-group">
										
												<label class="col-md-5 control-label" for="name"><h:outputText
														value="#{messages.stock_bank_filter}" />:</label>
												
													<label class="col-md-7 control-label" style="text-align: left;">
														<h:outputText value="#{unitBB.unit.transfusion.bank.name}" />
													</label>
												
											</div>

											<div class="form-group">
											
												<label class="col-md-5 control-label" for="name"><h:outputText
														value="#{messages.label_product}" />:</label>
												
												<label class="col-md-7 control-label" style="text-align: left;">
													<h:outputText value="#{messages[unitBB.unit.transfusion.dataProduct.display]}" />
												</label>
												
											</div>
											<div class="form-group">	
												<label class="col-md-5 control-label" for="name"><h:outputText
														value="#{messages.label_volume}" />:</label>
												
												<label class="col-md-7 control-label" style="text-align: left;">
													<h:outputText value="#{unitBB.unit.transfusion.volume}" />
												</label>
												
											</div>
										</div>
									</div>
								</fieldset>
								
							</div>
					</div>	
					
					
					
							<div class="row">
							<div class="col-md-8 col-md-offset-3" style="padding-bottom: 30px;">
								<fieldset>
									<legend>
										<h:outputText value="#{messages.label_movements}"/>
									</legend>	
					
<!-- 								if movimiento != null -->								
								<table class="col-md-12 col-lg-12 table-bordered table-striped table-condensed cf">
					        		<thead class="cf">
					        			<tr>
					        				<th><h:outputText value="#{messages.donation_date}"/></th>
					        				<th><h:outputText value="#{messages.label_movement}"/></th>
					        				<th><h:outputText value="#{messages.label_center}"/></th>
					        				        				
					        			</tr>
					        		</thead>
					        		<tbody>
					        			<c:forEach items="#{unitBB.unit.movements}" var="movement" varStatus="counter">
						        			<tr>
						        				<td data-title="#{messages.donation_date}"><h:outputText value="#{movement.date}"/></td>
						        				<td data-title="#{messages.label_movement}"><h:outputText value="#{messages[movement.movementsType.typeLabel]}"/></td>
						        				<td data-title="#{messages.label_center}"><h:outputText value="#{movement.centerName}"/></td>
						        				
						        			</tr>
						        		</c:forEach>
					        		
					        		</tbody>
					        	
        						</table>
							</fieldset>
							</div>
							</div>	
<!-- 								if donacion != null -->

							<div class="row">
							<div class="col-md-8 col-md-offset-3">
								<fieldset>
									<legend>
										<h:outputText value="#{messages.label_donation}"/>
									</legend>									
									
									<div class="form-horizontal">
										<div class="row">
											
											<div class="form-group">
										
												<label class="col-md-5 control-label" for="name"><h:outputText
														value="#{messages.donation_date}" />:</label>
												
												<label class="col-md-7 control-label" style="text-align: left;">
													<h:outputText value="#{unitBB.unit.donation.date}" />
												</label>
												
											</div>
											<div class="form-group">
											
												<label class="col-md-5 control-label" for="name"><h:outputText
														value="#{messages.stock_bank_filter}" />:</label>
												
												<label class="col-md-7 control-label" style="text-align: left;">
													<h:outputText value="#{unitBB.unit.donation.bank.name}" />
												</label>
												
											</div>
											<div class="form-group">	
												<label class="col-md-5 control-label" for="name"><h:outputText
														value="#{messages.donation_blood_type}" />:</label>
												
												<label class="col-md-7 control-label" style="text-align: left;">
													<h:outputText value="#{messages[unitBB.unit.donation.bloodType.displayName]}" />
												</label>
												
											</div>
										</div>
									</div>
									
									
									
								</fieldset>
							</div>
							</div>
			
							<div class="row">
							<div class="col-md-8 col-md-offset-3">
								<fieldset>
									<legend>
										<h:outputText value="Donante"/>
									</legend>									
									
									<div class="form-horizontal">
										<div class="row">
											
											<div class="form-group">
										
												<label class="col-md-5 control-label" for="name"><h:outputText
														value="Documento" />:</label>
												<label class="col-md-7 control-label" style="text-align: left;">
													<h:outputText value="#{unitBB.unit.donation.person.documentCountry.displayName}-" />
													<h:outputText value="#{unitBB.unit.donation.person.documentType.displayName}-" />
													<h:outputText value="#{unitBB.unit.donation.person.documentNumber}" />
												</label>
												
											</div>
											<div class="form-group">
											
												<label class="col-md-5 control-label" for="name"><h:outputText
														value="Nombre Completo" />:</label>
												<label class="col-md-7 control-label" style="text-align: left;">
													<h:outputText value="#{unitBB.unit.donation.person.fullName}" />
												</label>
											</div>
										</div>
									</div>
									
									
									
								</fieldset>
							</div>
							</div>
			
			
						</div>
						
					</div>
				</div>		
						
			</div>
		</h:form>
</h:body>
</html>
