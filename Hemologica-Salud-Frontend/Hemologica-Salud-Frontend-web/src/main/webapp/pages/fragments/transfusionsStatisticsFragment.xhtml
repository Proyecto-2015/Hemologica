<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pm="http://primefaces.org/mobile"
	xmlns:pe="http://primefaces.org/ui/extensions">
	
<h:head>
	
	<script type="text/javascript">
    function pieExtender() {
        this.cfg.highlighter = {
            show: true,
            tooltipLocation: 'w',
            useAxesFormatters: false,
            formatString: '%s = %d'
        };
    }
	</script>

</h:head>
<h:body>
	<h:form>
		<div class="form-group">
		
		<p:messages></p:messages>
			<fieldset>
				<div class="form-group div-center col-md-12 col-lg-12">
				<legend>
					<h:outputText value="#{messages.label_filter_insitution}"/>	
				</legend>
				
			
					<label class="col-md-2 col-lg-1 control-label" for="name"><h:outputText
							value="#{messages.label_insitution}" /></label>
					<div class="col-md-9 col-lg-2">
						<h:selectOneMenu id="options" class="form-control" value="#{transfusionsStatisticsBB.statictic.institution}"
							style="height: 34px;" converter="#{datainstitutionConverter}">
							
							<f:selectItems value="#{sessionBB.userInstitutions}" var="institution"
								itemValue="#{institution.code}" itemLabel="#{institution.name}" />
							
						</h:selectOneMenu>
					</div>
			
					<label class="col-md-2  col-lg-1 control-label" for="name"><h:outputText
							value="#{messages.label_bank}" /></label>
					<div class="col-md-9 col-lg-2">
						<h:selectOneMenu class="form-control" value="#{transfusionsStatisticsBB.statictic.bloodBank}"
							style="height: 34px;" converter="#{databankconverter}">
							<f:selectItems value="#{sessionBB.userBanks}" var="bank"
								itemValue="#{bank.code}" itemLabel="#{bank.name}" />
						</h:selectOneMenu>
					</div>

					
					<label class="col-md-1 col-lg-1 control-label" for="name"><h:outputText
								value="#{messages.label_date_from}" /></label>
								
					<div class="col-md-9 col-lg-2">
						<p:calendar pattern="dd/MM/yyyy"
								mode="popup" value="#{donationsStatisticsBB.statictic.fromDate}" />
					</div>
					
					<label class="col-md-1 col-lg-1 control-label" for="name"><h:outputText
								value="#{messages.label_date_to}" /></label>
								
					<div class="col-md-9 col-lg-2">							
						<p:calendar  pattern="dd/MM/yyyy"
								mode="popup" value="#{donationsStatisticsBB.statictic.toDate}" />
					</div>
				</div>
			</fieldset>
			
			<fieldset  style="padding: 0;">
				<div class=" col-xs-12 col-md-12 col-lg-3">
					<legend>
						<h:outputText value="#{messages.label_refine}"/>			
					</legend>
					
						<label class="col-md-12 col-lg-12 control-label" for="name"><h:outputText
								value="#{messages.donation_situation}" /></label>
						<div class="col-md-9 col-lg-11">
							<h:selectOneMenu id="options2" class="form-control" value="#{messageBB.mailData.messageOption}"
								style="height: 34px;" converter="dataMessageOptionsConverter">
								
								<f:selectItems value="#{applicationBB.messageOptions}" var="messageOption"
									itemValue="messageOption" itemLabel="#{messageOption.displayName}" />
								
							</h:selectOneMenu>
						</div>
				
						<label class="col-md-12  col-lg-12 control-label" for="name"><h:outputText
								value="#{messages.donation_blood_type}" /></label>
						<div class="col-md-9 col-lg-11">
							<h:selectOneMenu class="form-control" value="#{messageBB.mailData.bloodTypeRH}"
								style="height: 34px;">
								<f:selectItems value="#{applicationBB.donationABOTypes}" var="bloodType"
									itemValue="bloodType" itemLabel="#{bloodType.displayName}" />
<!-- 								<f:converter converterId="dataBloodTypeConverter" /> -->
							</h:selectOneMenu>
						</div>			
						
						<label class="col-md-12 col-lg-12 control-label" for="name"><h:outputText
								value="#{messages.donation_situation}" /></label>
						<div class="col-md-9 col-lg-11">
							<h:selectOneMenu id="options4" class="form-control" value="#{messageBB.mailData.messageOption}"
								style="height: 34px;" converter="dataMessageOptionsConverter">
								
								<f:selectItems value="#{applicationBB.messageOptions}" var="messageOption"
									itemValue="messageOption" itemLabel="#{messageOption.displayName}" />
								
							</h:selectOneMenu>
						</div>
				
						<label class="col-md-12  col-lg-12 control-label" for="name"><h:outputText
								value="#{messages.donation_blood_type}" /></label>
						<div class="col-md-9 col-lg-11">
							<h:selectOneMenu class="form-control" value="#{messageBB.mailData.bloodTypeRH}"
								style="height: 34px;">
								<f:selectItems value="#{applicationBB.bloodTypes}" var="bloodType"
									itemValue="bloodType" itemLabel="#{bloodType.displayName}" />
<!-- 								<f:converter converterId="dataBloodTypeConverter" /> -->
							</h:selectOneMenu>
						</div>
					
				</div>		
			
				<div class="col-xs-12 col-md-12 col-lg-8">
					<legend>
						<h:outputText value="#{messages.label_result}"/>	

						<p:commandButton  ajax="true" class=" pull-right" value="#{messages.label_search}"
					title="#{messages.label_preview}" action="#{donationsStatisticsBB.find()}" style="font-size: initial;
    							margin-right: 19px;" >
						<f:ajax  execute="@form"  /> 
					</p:commandButton>
								
					</legend>
					
					<p:chart type="pie" model="#{donationsStatisticsBB.pieModel1}" style="width:100%;height:100%"/>
			          
				</div>
			</fieldset>
			
		</div>
	</h:form>	
	
</h:body>
</html>
