<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

<h:body>

	<div class="container-fluid">
					
			<table id="lab_results_table"
				class="col-md-12 table-bordered table-striped table-condensed cf">
				<thead class="cf">
					<tr>
						
						<th><h:outputText
								value="#{messages.donation_lab_result_display}" /></th>
						<th><h:outputText
								value="#{messages.donation_lab_result_date}" /></th>
						<th><h:outputText
								value="#{messages.donation_lab_result_value}" /></th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td data-title="#{messages.donation_lab_result_display}">
							<h:selectOneMenu class="form-control" value="#{donationBB.labResult.analysis}"
								style="height: 34px;" converter="#{dataDonationAnalysisConverter}">
							
								<f:selectItems value="#{applicationBB.donationAnalysis}" var="item"
									itemValue="#{item}" itemLabel="#{messages[item.displayName]}" />
				
							</h:selectOneMenu>
						
						</td>
						<td data-title="#{messages.donation_lab_result_date}"><p:calendar
								value="#{donationBB.labDate}" pattern="dd/MM/yyyy">
							</p:calendar></td>
						
						<td data-title="#{messages.donation_lab_result_value}">
							<h:selectOneMenu class="form-control" value="#{donationBB.labResult.result}"
								style="height: 34px;" converter="#{dataResultConverter}">
							
								<f:selectItem itemLabel="" itemValue="#{null}"/>
								<f:selectItems value="#{applicationBB.results}" var="item"
									itemValue="#{item}" itemLabel="#{messages[item.displayName]}" />
				
							</h:selectOneMenu>
						</td>
	
						<td data-title="">
							<p:commandButton value="#{messages.label_add}" action="#{donationBB.addLabResult()}" update="@form"/>
						</td>
					</tr>
	
					<c:forEach items="#{donationBB.dataDonation.labResults}"
						var="labResItem" varStatus="counter">
						<tr>
							<td
								data-title="#{messages.donation_lab_result_display_placeholder}">
								<h:outputText value="#{messages[labResItem.analysis.displayName]}" />
							</td>
							<td
								data-title="#{messages.donation_lab_result_date_placeholder}">
								
								<h:outputText value="#{labResItem.date}" />
						
							</td>
							<td
								data-title="#{messages.donation_lab_result_value}">
									<h:outputText value="#{messages[labResItem.result.displayName]}" />
							</td>
							
							<td
								data-title="#{messages.donation_lab_result_value}">
									<p:commandLink   ajax="true" class="icon-list delete-icon center"
										title="#{messages.label_delete}" action="#{donationBB.removeLabResult(labResItem)}"  update="@form" >
<!-- 						<f:ajax  execute="@form"  /> -->
					
								</p:commandLink>
							</td>
						</tr>
					</c:forEach>
	
				</tbody>
			</table>

	</div>
</h:body>
</html>
