<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

<h:head>
</h:head>
<h:body>

	<div class="container">

		<h:form id="stockForm">
			<p:messages />
			<p:message for="stockForm" />
			

			<p:outputPanel styleClass="row ui-grid-row" >

				<p:outputPanel>

					<script src="http://maps.google.com/maps/api/js?sensor=true" type="text/javascript"></script>

					<p:gmap id="mapa" center="-34.8059635,-56.2145634,11" zoom="10" style="width:100%;height:400px" 
						type="ROADMAP" model="#{stockBB.gmapModel}">
						<p:ajax event="overlaySelect" listener="#{stockBB.onMarkerSelect}" update="@form"/>
					</p:gmap>
				</p:outputPanel>

				<p:outputPanel styleClass="row ui-grid-row" 
					rendered="#{stockBB.stock != null}">

					<table id="lab_results_table"
						class="col-md-12 table-bordered table-striped table-condensed cf">
<!-- 												<thead class="cf"> -->
<!-- 													<tr> -->

<!-- 														<c:forEach items="#{product.bloodTypes}" var="bloodType"> -->
<!-- 															<th> -->
<!-- 																<h:outputText value="#{bloodType.display}" /> -->
<!-- 															</th> -->
<!-- 														</c:forEach> -->
<!-- 													</tr> -->
<!-- 												</thead> -->
						<tbody>
							<c:forEach items="#{stockBB.stock.products}" var="product"
								varStatus="counter">
								<tr>
									<td data-title="Producto">
										<h:outputText value="#{product.display}" />
									</td>
									<c:forEach items="#{product.bloodTypes}" var="bloodType">
										<td data-title="#{bloodType.displayName}"><h:outputText
												value="#{bloodType.count}" /></td>
									</c:forEach>
								</tr>
							</c:forEach>

						</tbody>
					</table>

				</p:outputPanel>
			</p:outputPanel>

		</h:form>

	</div>

</h:body>
</html>
